local CyberUI = {}
CyberUI.__index = CyberUI

-- Services
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- Main Library
function CyberUI:CreateWindow(config)
	local Window = {
		Tabs = {},
		CurrentTab = nil,
		Dragging = false,
		DragStart = nil,
		StartPos = nil
	}
	
	-- Create ScreenGui
	local ScreenGui = Instance.new("ScreenGui")
	ScreenGui.Name = "CyberUI_" .. tostring(math.random(1000, 9999))
	ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	ScreenGui.ResetOnSpawn = false
	ScreenGui.Parent = game.CoreGui
	
	-- Main Frame
	local MainFrame = Instance.new("Frame")
	MainFrame.Name = "MainFrame"
	MainFrame.Size = UDim2.new(0, 550, 0, 450)
	MainFrame.Position = UDim2.new(0.5, -275, 0.5, -225)
	MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
	MainFrame.BorderSizePixel = 0
	MainFrame.ClipsDescendants = true
	MainFrame.Parent = ScreenGui
	
	-- UI Corner
	local Corner = Instance.new("UICorner")
	Corner.CornerRadius = UDim.new(0, 8)
	Corner.Parent = MainFrame
	
	-- Border Glow
	local BorderGlow = Instance.new("UIStroke")
	BorderGlow.Color = Color3.fromRGB(0, 255, 255)
	BorderGlow.Thickness = 1
	BorderGlow.Transparency = 0.7
	BorderGlow.Parent = MainFrame
	
	-- Shadow
	local Shadow = Instance.new("ImageLabel")
	Shadow.Name = "Shadow"
	Shadow.BackgroundTransparency = 1
	Shadow.Position = UDim2.new(0, -15, 0, -15)
	Shadow.Size = UDim2.new(1, 30, 1, 30)
	Shadow.ZIndex = 0
	Shadow.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"
	Shadow.ImageColor3 = Color3.fromRGB(0, 255, 255)
	Shadow.ImageTransparency = 0.9
	Shadow.Parent = MainFrame
	
	-- Header
	local Header = Instance.new("Frame")
	Header.Name = "Header"
	Header.Size = UDim2.new(1, 0, 0, 50)
	Header.BackgroundColor3 = Color3.fromRGB(20, 20, 35)
	Header.BorderSizePixel = 0
	Header.Parent = MainFrame
	
	local HeaderCorner = Instance.new("UICorner")
	HeaderCorner.CornerRadius = UDim.new(0, 8)
	HeaderCorner.Parent = Header
	
	-- Title
	local Title = Instance.new("TextLabel")
	Title.Name = "Title"
	Title.Size = UDim2.new(1, -120, 0, 25)
	Title.Position = UDim2.new(0, 15, 0, 5)
	Title.BackgroundTransparency = 1
	Title.Text = config.Title or "CyberUI"
	Title.TextColor3 = Color3.fromRGB(0, 255, 255)
	Title.TextSize = 18
	Title.TextXAlignment = Enum.TextXAlignment.Left
	Title.Font = Enum.Font.GothamBold
	Title.Parent = Header
	
	-- Subtitle
	local Subtitle = Instance.new("TextLabel")
	Subtitle.Name = "Subtitle"
	Subtitle.Size = UDim2.new(1, -120, 0, 15)
	Subtitle.Position = UDim2.new(0, 15, 0, 30)
	Subtitle.BackgroundTransparency = 1
	Subtitle.Text = config.Subtitle or ""
	Subtitle.TextColor3 = Color3.fromRGB(0, 200, 200)
	Subtitle.TextSize = 12
	Subtitle.TextXAlignment = Enum.TextXAlignment.Left
	Subtitle.Font = Enum.Font.Gotham
	Subtitle.TextTransparency = 0.3
	Subtitle.Parent = Header
	
	-- Close Button
	if config.Closable ~= false then
		local CloseButton = Instance.new("TextButton")
		CloseButton.Name = "CloseButton"
		CloseButton.Size = UDim2.new(0, 30, 0, 30)
		CloseButton.Position = UDim2.new(1, -40, 0, 10)
		CloseButton.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
		CloseButton.Text = "X"
		CloseButton.TextColor3 = Color3.fromRGB(255, 100, 100)
		CloseButton.TextSize = 16
		CloseButton.Font = Enum.Font.GothamBold
		CloseButton.Parent = Header
		
		local CloseCorner = Instance.new("UICorner")
		CloseCorner.CornerRadius = UDim.new(0, 4)
		CloseCorner.Parent = CloseButton
		
		CloseButton.MouseButton1Click:Connect(function()
			ScreenGui:Destroy()
		end)
	end
	
	-- Tab Container
	local TabContainer = Instance.new("Frame")
	TabContainer.Name = "TabContainer"
	TabContainer.Size = UDim2.new(1, 0, 0, 35)
	TabContainer.Position = UDim2.new(0, 0, 0, 50)
	TabContainer.BackgroundColor3 = Color3.fromRGB(18, 18, 30)
	TabContainer.BorderSizePixel = 0
	TabContainer.Parent = MainFrame
	
	local TabLayout = Instance.new("UIListLayout")
	TabLayout.FillDirection = Enum.FillDirection.Horizontal
	TabLayout.Padding = UDim.new(0, 5)
	TabLayout.Parent = TabContainer
	
	local TabPadding = Instance.new("UIPadding")
	TabPadding.PaddingLeft = UDim.new(0, 10)
	TabPadding.PaddingTop = UDim.new(0, 5)
	TabPadding.Parent = TabContainer
	
	-- Content Container
	local ContentContainer = Instance.new("ScrollingFrame")
	ContentContainer.Name = "ContentContainer"
	ContentContainer.Size = UDim2.new(1, -10, 1, -95)
	ContentContainer.Position = UDim2.new(0, 5, 0, 90)
	ContentContainer.BackgroundTransparency = 1
	ContentContainer.BorderSizePixel = 0
	ContentContainer.ScrollBarThickness = 4
	ContentContainer.ScrollBarImageColor3 = Color3.fromRGB(0, 255, 255)
	ContentContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
	ContentContainer.Parent = MainFrame
	
	local ContentLayout = Instance.new("UIListLayout")
	ContentLayout.Padding = UDim.new(0, 8)
	ContentLayout.Parent = ContentContainer
	
	ContentLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
		ContentContainer.CanvasSize = UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y + 10)
	end)
	
	-- Dragging
	local dragToggle = nil
	local dragInput = nil
	local dragStart = nil
	local startPos = nil
	
	Header.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragToggle = true
			dragStart = input.Position
			startPos = MainFrame.Position
			
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragToggle = false
				end
			end)
		end
	end)
	
	Header.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			dragInput = input
		end
	end)
	
	UserInputService.InputChanged:Connect(function(input)
		if input == dragInput and dragToggle then
			local delta = input.Position - dragStart
			MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end)
	
	-- Add Tab Function
	function Window:AddTab(name)
		local Tab = {
			Name = name,
			Elements = {}
		}
		
		-- Tab Button
		local TabButton = Instance.new("TextButton")
		TabButton.Name = name
		TabButton.Size = UDim2.new(0, 100, 0, 25)
		TabButton.BackgroundColor3 = Color3.fromRGB(25, 25, 40)
		TabButton.Text = name
		TabButton.TextColor3 = Color3.fromRGB(100, 200, 200)
		TabButton.TextSize = 13
		TabButton.Font = Enum.Font.GothamSemibold
		TabButton.Parent = TabContainer
		
		local TabCorner = Instance.new("UICorner")
		TabCorner.CornerRadius = UDim.new(0, 4)
		TabCorner.Parent = TabButton
		
		-- Select Tab
		local function SelectTab()
			for _, tab in pairs(Window.Tabs) do
				for _, element in pairs(tab.Elements) do
					element.Visible = false
				end
				tab.Button.BackgroundColor3 = Color3.fromRGB(25, 25, 40)
				tab.Button.TextColor3 = Color3.fromRGB(100, 200, 200)
			end
			
			for _, element in pairs(Tab.Elements) do
				element.Visible = true
			end
			
			TabButton.BackgroundColor3 = Color3.fromRGB(0, 150, 150)
			TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
			Window.CurrentTab = Tab
		end
		
		TabButton.MouseButton1Click:Connect(SelectTab)
		
		Tab.Button = TabButton
		table.insert(Window.Tabs, Tab)
		
		if #Window.Tabs == 1 then
			SelectTab()
		end
		
		-- Add Button
		function Tab:AddButton(config)
			local ButtonFrame = Instance.new("Frame")
			ButtonFrame.Size = UDim2.new(1, 0, 0, config.Description and 70 or 50)
			ButtonFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 35)
			ButtonFrame.BorderSizePixel = 0
			ButtonFrame.Visible = Window.CurrentTab == Tab
			ButtonFrame.Parent = ContentContainer
			
			local ButtonCorner = Instance.new("UICorner")
			ButtonCorner.CornerRadius = UDim.new(0, 6)
			ButtonCorner.Parent = ButtonFrame
			
			local ButtonStroke = Instance.new("UIStroke")
			ButtonStroke.Color = Color3.fromRGB(0, 255, 255)
			ButtonStroke.Transparency = 0.8
			ButtonStroke.Parent = ButtonFrame
			
			local Button = Instance.new("TextButton")
			Button.Size = UDim2.new(1, -20, 0, 30)
			Button.Position = UDim2.new(0, 10, 0, 10)
			Button.BackgroundColor3 = Color3.fromRGB(0, 180, 180)
			Button.Text = config.Name
			Button.TextColor3 = Color3.fromRGB(255, 255, 255)
			Button.TextSize = 14
			Button.Font = Enum.Font.GothamBold
			Button.Parent = ButtonFrame
			
			local BtnCorner = Instance.new("UICorner")
			BtnCorner.CornerRadius = UDim.new(0, 4)
			BtnCorner.Parent = Button
			
			if config.Description then
				local Desc = Instance.new("TextLabel")
				Desc.Size = UDim2.new(1, -20, 0, 20)
				Desc.Position = UDim2.new(0, 10, 0, 45)
				Desc.BackgroundTransparency = 1
				Desc.Text = config.Description
				Desc.TextColor3 = Color3.fromRGB(100, 200, 200)
				Desc.TextSize = 11
				Desc.Font = Enum.Font.Gotham
				Desc.TextTransparency = 0.4
				Desc.TextXAlignment = Enum.TextXAlignment.Left
				Desc.Parent = ButtonFrame
			end
			
			Button.MouseButton1Click:Connect(function()
				if config.Callback then
					config.Callback()
				end
			end)
			
			table.insert(Tab.Elements, ButtonFrame)
		end
		
		-- Add Toggle
		function Tab:AddToggle(config)
			local ToggleFrame = Instance.new("Frame")
			ToggleFrame.Size = UDim2.new(1, 0, 0, config.Description and 70 or 50)
			ToggleFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 35)
			ToggleFrame.BorderSizePixel = 0
			ToggleFrame.Visible = Window.CurrentTab == Tab
			ToggleFrame.Parent = ContentContainer
			
			local ToggleCorner = Instance.new("UICorner")
			ToggleCorner.CornerRadius = UDim.new(0, 6)
			ToggleCorner.Parent = ToggleFrame
			
			local ToggleStroke = Instance.new("UIStroke")
			ToggleStroke.Color = Color3.fromRGB(0, 255, 255)
			ToggleStroke.Transparency = 0.8
			ToggleStroke.Parent = ToggleFrame
			
			local Label = Instance.new("TextLabel")
			Label.Size = UDim2.new(1, -80, 0, 20)
			Label.Position = UDim2.new(0, 10, 0, 10)
			Label.BackgroundTransparency = 1
			Label.Text = config.Name
			Label.TextColor3 = Color3.fromRGB(200, 255, 255)
			Label.TextSize = 14
			Label.Font = Enum.Font.GothamSemibold
			Label.TextXAlignment = Enum.TextXAlignment.Left
			Label.Parent = ToggleFrame
			
			if config.Description then
				local Desc = Instance.new("TextLabel")
				Desc.Size = UDim2.new(1, -80, 0, 20)
				Desc.Position = UDim2.new(0, 10, 0, 32)
				Desc.BackgroundTransparency = 1
				Desc.Text = config.Description
				Desc.TextColor3 = Color3.fromRGB(100, 200, 200)
				Desc.TextSize = 11
				Desc.Font = Enum.Font.Gotham
				Desc.TextTransparency = 0.4
				Desc.TextXAlignment = Enum.TextXAlignment.Left
				Desc.Parent = ToggleFrame
			end
			
			local ToggleButton = Instance.new("TextButton")
			ToggleButton.Size = UDim2.new(0, 50, 0, 24)
			ToggleButton.Position = UDim2.new(1, -60, 0, 10)
			ToggleButton.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
			ToggleButton.Text = ""
			ToggleButton.Parent = ToggleFrame
			
			local ToggleBtnCorner = Instance.new("UICorner")
			ToggleBtnCorner.CornerRadius = UDim.new(1, 0)
			ToggleBtnCorner.Parent = ToggleButton
			
			local ToggleIndicator = Instance.new("Frame")
			ToggleIndicator.Size = UDim2.new(0, 18, 0, 18)
			ToggleIndicator.Position = UDim2.new(0, 3, 0, 3)
			ToggleIndicator.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
			ToggleIndicator.BorderSizePixel = 0
			ToggleIndicator.Parent = ToggleButton
			
			local IndicatorCorner = Instance.new("UICorner")
			IndicatorCorner.CornerRadius = UDim.new(1, 0)
			IndicatorCorner.Parent = ToggleIndicator
			
			local toggled = config.Default or false
			
			local function UpdateToggle()
				if toggled then
					TweenService:Create(ToggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0, 200, 200)}):Play()
					TweenService:Create(ToggleIndicator, TweenInfo.new(0.2), {Position = UDim2.new(1, -21, 0, 3), BackgroundColor3 = Color3.fromRGB(255, 255, 255)}):Play()
				else
					TweenService:Create(ToggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(40, 40, 60)}):Play()
					TweenService:Create(ToggleIndicator, TweenInfo.new(0.2), {Position = UDim2.new(0, 3, 0, 3), BackgroundColor3 = Color3.fromRGB(200, 200, 200)}):Play()
				end
				
				if config.Callback then
					config.Callback(toggled)
				end
			end
			
			UpdateToggle()
			
			ToggleButton.MouseButton1Click:Connect(function()
				toggled = not toggled
				UpdateToggle()
			end)
			
			table.insert(Tab.Elements, ToggleFrame)
		end
		
		-- Add Slider
		function Tab:AddSlider(config)
			local SliderFrame = Instance.new("Frame")
			SliderFrame.Size = UDim2.new(1, 0, 0, config.Description and 80 or 65)
			SliderFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 35)
			SliderFrame.BorderSizePixel = 0
			SliderFrame.Visible = Window.CurrentTab == Tab
			SliderFrame.Parent = ContentContainer
			
			local SliderCorner = Instance.new("UICorner")
			SliderCorner.CornerRadius = UDim.new(0, 6)
			SliderCorner.Parent = SliderFrame
			
			local SliderStroke = Instance.new("UIStroke")
			SliderStroke.Color = Color3.fromRGB(0, 255, 255)
			SliderStroke.Transparency = 0.8
			SliderStroke.Parent = SliderFrame
			
			local Label = Instance.new("TextLabel")
			Label.Size = UDim2.new(0.7, 0, 0, 20)
			Label.Position = UDim2.new(0, 10, 0, 10)
			Label.BackgroundTransparency = 1
			Label.Text = config.Name
			Label.TextColor3 = Color3.fromRGB(200, 255, 255)
			Label.TextSize = 14
			Label.Font = Enum.Font.GothamSemibold
			Label.TextXAlignment = Enum.TextXAlignment.Left
			Label.Parent = SliderFrame
			
			local ValueLabel = Instance.new("TextLabel")
			ValueLabel.Size = UDim2.new(0.3, -10, 0, 20)
			ValueLabel.Position = UDim2.new(0.7, 0, 0, 10)
			ValueLabel.BackgroundTransparency = 1
			ValueLabel.Text = tostring(config.Default or config.Min)
			ValueLabel.TextColor3 = Color3.fromRGB(0, 255, 255)
			ValueLabel.TextSize = 13
			ValueLabel.Font = Enum.Font.GothamBold
			ValueLabel.TextXAlignment = Enum.TextXAlignment.Right
			ValueLabel.Parent = SliderFrame
			
			if config.Description then
				local Desc = Instance.new("TextLabel")
				Desc.Size = UDim2.new(1, -20, 0, 15)
				Desc.Position = UDim2.new(0, 10, 0, 32)
				Desc.BackgroundTransparency = 1
				Desc.Text = config.Description
				Desc.TextColor3 = Color3.fromRGB(100, 200, 200)
				Desc.TextSize = 11
				Desc.Font = Enum.Font.Gotham
				Desc.TextTransparency = 0.4
				Desc.TextXAlignment = Enum.TextXAlignment.Left
				Desc.Parent = SliderFrame
			end
			
			local SliderBack = Instance.new("Frame")
			SliderBack.Size = UDim2.new(1, -20, 0, 6)
			SliderBack.Position = UDim2.new(0, 10, 1, -18)
			SliderBack.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
			SliderBack.BorderSizePixel = 0
			SliderBack.Parent = SliderFrame
			
			local SliderBackCorner = Instance.new("UICorner")
			SliderBackCorner.CornerRadius = UDim.new(1, 0)
			SliderBackCorner.Parent = SliderBack
			
			local SliderFill = Instance.new("Frame")
			SliderFill.Size = UDim2.new(0, 0, 1, 0)
			SliderFill.BackgroundColor3 = Color3.fromRGB(0, 200, 200)
			SliderFill.BorderSizePixel = 0
			SliderFill.Parent = SliderBack
			
			local SliderFillCorner = Instance.new("UICorner")
			SliderFillCorner.CornerRadius = UDim.new(1, 0)
			SliderFillCorner.Parent = SliderFill
			
			local SliderButton = Instance.new("TextButton")
			SliderButton.Size = UDim2.new(1, 0, 1, 0)
			SliderButton.BackgroundTransparency = 1
			SliderButton.Text = ""
			SliderButton.Parent = SliderBack
			
			local dragging = false
			local min = config.Min or 0
			local max = config.Max or 100
			local value = config.Default or min
			
			local function UpdateSlider(input)
				local sizeX = SliderBack.AbsoluteSize.X
				local posX = math.clamp((input.Position.X - SliderBack.AbsolutePosition.X) / sizeX, 0, 1)
				value = math.floor(min + (max - min) * posX)
				
				ValueLabel.Text = tostring(value)
				SliderFill.Size = UDim2.new(posX, 0, 1, 0)
				
				if config.Callback then
					config.Callback(value)
				end
			end
			
			SliderButton.MouseButton1Down:Connect(function()
				dragging = true
			end)
			
			UserInputService.InputEnded:Connect(function(input)
				if input.UserInputType == Enum.UserInputType.MouseButton1 then
					dragging = false
				end
			end)
			
			UserInputService.InputChanged:Connect(function(input)
				if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
					UpdateSlider(input)
				end
			end)
			
			-- Set initial value
			local initialPercent = (value - min) / (max - min)
			SliderFill.Size = UDim2.new(initialPercent, 0, 1, 0)
			
			table.insert(Tab.Elements, SliderFrame)
		end
		
		-- Add more elements (Dropdown, Input, etc.) following same pattern...
		
		return Tab
	end
	
	return Window
end

-- Notifications
function CyberUI:Notify(config)
	local NotifGui = Instance.new("ScreenGui")
	NotifGui.Name = "CyberNotification"
	NotifGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	NotifGui.Parent = game.CoreGui
	
	local Notif = Instance.new("Frame")
	Notif.Size = UDim2.new(0, 300, 0, 80)
	Notif.Position = UDim2.new(1, 320, 0, 20)
	Notif.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
	Notif.BorderSizePixel = 0
	Notif.Parent = NotifGui
	
	local NotifCorner = Instance.new("UICorner")
	NotifCorner.CornerRadius = UDim.new(0, 8)
	NotifCorner.Parent = Notif
	
	local NotifStroke = Instance.new("UIStroke")
	NotifStroke.Color = Color3.fromRGB(0, 255, 255)
	NotifStroke.Thickness = 1
	NotifStroke.Transparency = 0.6
	NotifStroke.Parent = Notif
	
	local Accent = Instance.new("Frame")
	Accent.Size = UDim2.new(0, 3, 1, 0)
	Accent.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
	Accent.BorderSizePixel = 0
	Accent.Parent = Notif
	
	local AccentCorner = Instance.new("UICorner")
	AccentCorner.CornerRadius = UDim.new(0, 8)
	AccentCorner.Parent = Accent
	
	local Title = Instance.new("TextLabel")
	Title.Size = UDim2.new(1, -20, 0, 25)
	Title.Position = UDim2.new(0, 15, 0, 10)
	Title.BackgroundTransparency = 1
	Title.Text = config.Title or "Notification"
	Title.TextColor3 = Color3.fromRGB(0, 255, 255)
	Title.TextSize = 15
	Title.Font = Enum.Font.GothamBold
	Title.TextXAlignment = Enum.TextXAlignment.Left
	Title.Parent = Notif
	
	local Desc = Instance.new("TextLabel")
	Desc.Size = UDim2.new(1, -20, 0, 35)
	Desc.Position = UDim2.new(0, 15, 0, 35)
	Desc.BackgroundTransparency = 1
	Desc.Text = config.Description or ""
	Desc.TextColor3 = Color3.fromRGB(150, 200, 200)
	Desc.TextSize = 12
	Desc.Font = Enum.Font.Gotham
	Desc.TextWrapped = true
	Desc.TextXAlignment = Enum.TextXAlignment.Left
	Desc.TextYAlignment = Enum.TextYAlignment.Top
	Desc.Parent = Notif
	
	-- Animate in
	Notif:TweenPosition(UDim2.new(1, -320, 0, 20), Enum.EasingDirection.Out, Enum.EasingStyle.Back, 0.5, true)
	
	-- Wait and animate out
	wait(config.Duration and config.Duration / 1000 or 3)
	Notif:TweenPosition(UDim2.new(1, 320, 0, 20), Enum.EasingDirection.In, Enum.EasingStyle.Back, 0.3, true)
	
	wait(0.3)
	NotifGui:Destroy()
end

return CyberUI
